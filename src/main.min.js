/*! For license information please see main.min.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-dnd")},function(e,t){e.exports=require("react-dnd-html5-backend")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("chokidar")},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(7),c=n(1),o=n(4),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var c=arguments[t],o=0,i=c.length;o<i;o++,a++)r[a]=c[o];return r},u=[{document:{path:"nothing",name:"nothing"},placed:{path:"nothing",name:"nothing"},ext:{ai:!0,pdf:!1},export:!1,extFolder:{path:"nothing",name:"nothing"}},{document:{path:"nothing",name:"nothing"},placed:{path:"nothing",name:"nothing"},ext:{ai:!0,pdf:!1},export:!1,extFolder:{path:"nothing",name:"nothing"}},{document:{path:"nothing",name:"nothing"},placed:{path:"nothing",name:"nothing"},ext:{ai:!0,pdf:!1},export:!1,extFolder:{path:"nothing",name:"nothing"}}],s={PDFver:"ACROBAT7",close:!0},p=Object(o.combineReducers)({WatchedTypes:function(e,t){switch(void 0===e&&(e=u),t.type){case"SETWATCHED":return i({},t.watched);case"SETWATCHPROP":var n=l(e);return n[t.index]=t.obj,n;default:return e}},ModeSwitch:function(e,t){switch(void 0===e&&(e="watch"),t.type){case"SWITCHMODE":return t.mode;default:return e}},Options:function(e,t){switch(void 0===e&&(e=s),t.type){case"SETOPTIONS":return t.options;case"SETPROP":var n=i({},e);return n[t.prop]=t.value,n;default:return e}},watchFlag:function(e,t){switch(void 0===e&&(e=!1),t.type){case"SETWATCHFLAG":return t.watchFlag;default:return e}}}),f=function(){return Object(o.createStore)(p)},d=function(e){return{state:e}},m=function(e){return{watched:e,type:"SETWATCHED"}},h=function(e,t){return{obj:e,index:t,type:"SETWATCHPROP"}},v=function(e){return{mode:e,type:"SWITCHMODE"}},b=function(e){return{options:e,type:"SETOPTIONS"}},E=function(e,t){return{prop:e,value:t,type:"SETPROP"}},x=function(e){return{watchFlag:e,type:"SETWATCHFLAG"}},y=function(e){return{set_Watched:function(t){return e(m(t))},set_WatchProp:function(t,n){return e(h(t,n))},switch_Mode:function(t){return e(v(t))},set_Options:function(t){return e(b(t))},set_Value:function(t,n){return e(E(t,n))},set_WatchFlag:function(t){return e(x(t))}}},g=n(2),w=n.n(g),O=n(3),_=n.n(O),N=n(8);const k=new CSInterface,S=(k.getExtensionID(),k.getSystemPath(SystemPath.EXTENSION),k.getSystemPath(SystemPath.EXTENSION)+"/jsx/"),j=process.env["win32"==process.platform?"USERPROFILE":"HOME"],T=w.a.join(j,"Desktop"),P=S+"/jsxParts",F=S+"/polyFill",C=async e=>{var t;(await(t=e,new Promise((e,n)=>{_.a.readdir(t,(t,r)=>{t&&n(t),e(r)})})).catch(e=>{})).filter(e=>".jsx"===w.a.extname(e)).forEach(t=>k.evalScript(`$.evalFile("${e}/${t}")`))},W=()=>cep.fs.showOpenDialog(!1,!0,"open",T).data[0],D=()=>cep.fs.showOpenDialog(!1,!1,"open",T).data[0],A=e=>k.evalScript(`$.evalFile(alert("${e}"))`);var M=function(e){var t=e.root,n=e.point,a={left:n.x+"px",top:n.y+"px"};return r.createElement("div",{className:"rootBox",style:a},r.createElement("span",{className:"rootBox__root"},t))},B=n(5),R=n(6),I=function(e){var t=e.onDrop,n=Object(B.useDrop)({accept:[R.NativeTypes.FILE],drop:function(n,r){t&&t(e,r)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),a=n[0],c=a.canDrop,o=a.isOver,i=n[1],l=Object(r.useState)({x:0,y:0}),u=l[0],s=l[1],p=c&&o,f=e.root;return r.createElement("button",{ref:i,className:"dropForm "+(p?"dropOver":""),onClick:function(t){return e.func(t,e.arg)},onMouseOver:function(e){return function(e){var t=e.currentTarget.getBoundingClientRect();s({x:e.clientX+15-t.left,y:e.clientY-15-t.top})}(e)}},r.createElement(M,{root:f.path.path,point:u}),r.createElement("p",null,f.name),r.createElement("span",{className:"dropForm__rootName"},f.path.name))},H=Object(c.connect)(d,y)((function(e){var t=Object(r.useCallback)((function(t,n){if(n){var r=n.getItem().files;e.setDrop(r[0],e.arg)}}),[e]);return r.createElement(B.DndProvider,{backend:R.HTML5Backend},r.createElement(I,{func:e.func,arg:e.arg,root:e.root,onDrop:t}))})),q=function(e){var t=e.name,n=e.checked,a=e.func,c=e.arg;return r.createElement("label",{className:"radiobox-doc"},r.createElement("input",{type:"radio",className:"radiobox-doc__input",checked:n,onChange:function(e){return a(e,c)}}),r.createElement("div",{className:"radiobox-doc__display"},r.createElement("div",{className:"radiobox-doc__ball"})),r.createElement("span",{className:"radiobox-doc__name"},t))},$=function(e){var t=e.checked,n=e.name,a=e.func,c=e.arg;return r.createElement("div",{className:"checkboxRange"},r.createElement("span",null,n),r.createElement("label",{className:"checkbox-std"},r.createElement("input",{type:"checkbox",className:"checkbox-std__input",name:n,checked:t,onChange:function(e){return a(e,c)}}),r.createElement("div",{className:"checkbox-std__display"}),r.createElement("div",{className:"checkbox-std__cover"}),r.createElement("span",{className:"checkbox-std__text"},t?"ON":"OFF")))},L=function(e){var t=e.checked,n=e.name,a=e.func,c=e.arg;return r.createElement("label",{className:"checkbox-doc"},r.createElement("input",{type:"checkbox",className:"checkbox-doc__input",name:n,checked:t,onChange:function(e){return a(e,c)}}),r.createElement("div",{className:"checkbox-doc__display"},r.createElement("div",{className:"checkbox-doc__square"})),r.createElement("span",{className:"checkbox-doc__name"},n))},G=Object(c.connect)(d,y)((function(e){return r.createElement("div",{className:"watching"+(e.state.watchFlag?"":" none")},r.createElement("span",{className:"watching__title"},"watching"),r.createElement("div",{className:"watching__circle"},r.createElement("div",{className:"watching__eye"},r.createElement("div",{className:"watching__blackEye"}))))})),V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},X=Object(c.connect)(d,y)((function(e){var t=Object(r.useState)(e.data),n=t[0],a=t[1],c=Object(r.useState)(!1),o=(c[0],c[1]);Object(r.useMemo)((function(){return a(e.data)}),[e]);var i=Object(r.useCallback)((function(t,r){var a=V({},n);a.export=t.target.checked,e.set_WatchProp(a,r.index)}),[n]),l=Object(r.useCallback)((function(t,r){var a=V({},n);a.ext["ai"===r.prop?"pdf":"ai"]=!1,a.ext[r.prop]=t.target.checked,e.set_WatchProp(a,r.index)}),[n]),u=Object(r.useCallback)((function(t,r){o(!0);var a=V({},n),c=decodeURI(("folder"===r.type?W:D)());if(""===c||null==c||"undefined"===c)return!1;var i,l=N.parse(c);if(!p(l.path,r.type))return A("please choice file properly"),!1;a[r.prop].path=l.path,a[r.prop].name=(i=l.path,g.basename(i)),e.set_WatchProp(a,r.index)}),[n]),s=function(t,r){if(!p(t.path,r.type))return A("please choice file properly"),!1;var a=V({},n);a[r.prop].path=t.path,a[r.prop].name=t.name,e.set_WatchProp(a,r.index)},p=function(e,t){if("document"===t)return".ai"===g.extname(e)||".pdf"===g.extname(e);if("folder"===t)try{return O.statSync(e).isDirectory()}catch(e){return!1}return!0};return r.createElement("div",{className:"rootForm"},r.createElement(G,null),r.createElement("header",{className:"rootForm__header"},r.createElement("h3",{className:"head-small"},"document ",e.index+1)),r.createElement("div",{className:"documentForm"},r.createElement(H,{setDrop:s,func:u,arg:{index:e.index,prop:"document",type:"document"},root:{classType:"documentForm__doc",name:"document",path:n.document}}),r.createElement(H,{setDrop:s,func:u,arg:{index:e.index,prop:"placed",type:"image"},root:{classType:"documentForm__placed",name:"placed item",path:n.placed}}),r.createElement("ul",null,r.createElement("li",null,r.createElement(q,{func:l,arg:{index:e.index,prop:"ai"},checked:n.ext.ai,name:"ai"})),r.createElement("li",null,r.createElement(q,{func:l,arg:{index:e.index,prop:"pdf"},checked:n.ext.pdf,name:"pdf"})))),r.createElement("div",{className:"exportForm"},r.createElement(L,{func:i,name:"export",checked:n.export,arg:{index:e.index,type:"image"}}),r.createElement(H,{setDrop:s,func:u,arg:{index:e.index,prop:"extFolder",type:"folder"},root:{classType:"exportForm__path",name:"export path",path:n.extFolder}})))})),J=function(e){var t=e.name,n=e.func,a=e.arg,c=e.disabled;return r.createElement("button",{className:"button-std",onClick:function(){return n(a)},disabled:c},t)},U=function(e){var t=e.name,n=e.func,a=e.arg,c=e.disabled,o=void 0!==c&&c;return r.createElement("button",{className:"button-watch",onClick:function(){return n(a)},disabled:o},t)},K=n(9),Y=function(){function e(e,t){void 0===e&&(e="hostScript"),this.jsx=e,this.arg=t}return e.prototype.callJsx=function(){var e=this;return new Promise((function(t,n){k.evalScript('$.evalFile("'+S+e.jsx+'")',(function(e){e&&"false"!==e||n(!1),t(e)}))}))},e.prototype.callHostScript=function(e){var t=this;return new Promise((function(n,r){k.evalScript(t.jsx+"("+JSON.stringify(e)+")",(function(e){e&&"false"!==e||r(!1),n(e)}))}))},e}(),z=function(e,t,n,r){return new(n||(n=Promise))((function(a,c){function o(e){try{l(r.next(e))}catch(e){c(e)}}function i(e){try{l(r.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))},Q=function(e,t){var n,r,a,c,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},Z=function(){function e(e,t){this.watchOption=e,this.action=t,this.watcher=null,this.watchOption=e,this.action=t}return e.prototype.launchToWatch=function(){var e=this;this.watcher=K.watch(this.watchOption.watch.placed.path,{persistent:!0,ignoreInitial:!0,depth:0}),this.watcher.on("ready",(function(){})).on("change",(function(t,n){return z(e,void 0,void 0,(function(){return Q(this,(function(e){switch(e.label){case 0:return[4,this.action.callHostScript(this.watchOption)];case 1:return e.sent(),[2]}}))}))})).on("error",(function(e){return A(e)}))},e.prototype.stopWatch=function(){return z(this,void 0,void 0,(function(){return Q(this,(function(e){switch(e.label){case 0:return[4,this.watcher.close()];case 1:return e.sent(),[2]}}))}))},e}(),ee=function(e,t,n,r){return new(n||(n=Promise))((function(a,c){function o(e){try{l(r.next(e))}catch(e){c(e)}}function i(e){try{l(r.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))},te=function(e,t){var n,r,a,c,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},ne=Object(c.connect)(d,y)((function(e){var t=Object(r.useState)([]),n=t[0],a=t[1],c=Object(r.useCallback)((function(){return e.switch_Mode("options")}),[e.state.ModeSwitch]),o=n.length<1;return r.createElement("div",{className:"ButtonRange"},r.createElement("ul",null,r.createElement("li",null,r.createElement(U,{name:o?"watch start":"watch stop",func:o?function(){var t=function(e,t){var n=e.map((function(e){var n=new Y;return new Z({watch:e,option:t},n)}));return n.forEach((function(e){return e.launchToWatch()})),n}(e.state.WatchedTypes,e.state.Options);a(t),e.set_WatchFlag(!0),A("watch start")}:function(){return ee(void 0,void 0,void 0,(function(){return te(this,(function(t){switch(t.label){case 0:return[4,Promise.all(n.map((function(e){return ee(void 0,void 0,void 0,(function(){return te(this,(function(t){switch(t.label){case 0:return[4,e.stopWatch()];case 1:return t.sent(),[2]}}))}))})))];case 1:return t.sent(),a([]),e.set_WatchFlag(!1),A("watchStop"),[2]}}))}))}})),r.createElement("li",null,r.createElement(J,{name:"option",func:c,disabled:!o}))))})),re=function(){return r.createElement("header",{className:"header"},r.createElement("h1",{className:"head-top"},"watch Placeditem"))},ae=function(){return r.createElement("footer",{className:"footer"},r.createElement("p",null,"developed by Kawano Shuji"),r.createElement("p",null,"using chokidar and fsevents"),r.createElement("p",null,"https://github.com/paulmillr/chokidar/blob/master/LICENSE"),r.createElement("p",null,"https://github.com/fsevents/fsevents#license"))},ce=Object(c.connect)(d,y)((function(e){var t=Object(r.useState)(e.state.WatchedTypes),n=t[0],a=t[1];Object(r.useMemo)((function(){return a(e.state.WatchedTypes)}),[e]);var c=n.map((function(e,t){return r.createElement("li",{key:t},r.createElement(X,{data:e,index:t}))}));return r.createElement("div",{className:"watchForm"},r.createElement(re,null),r.createElement("ul",{className:"documentList"},c),r.createElement(ne,null),r.createElement(ae,null))})),oe=function(e){var t=e.value,n=e.options,a=e.func,c=e.arg,o=n.map((function(e){return r.createElement("option",{className:"selectBox-std__option",key:e},e)}));return r.createElement("div",{className:"selectBox-std"},r.createElement("select",{className:"selectBox-std__input",value:t,onChange:function(e){return a(e,c)}},o),r.createElement("div",{className:"selectBox-std__plate"},r.createElement("div",{className:"selectBox-std__arrow"})))},ie=Object(c.connect)(d,y)((function(e){var t=Object(r.useState)(e.state.Options),n=t[0],a=t[1];Object(r.useMemo)((function(){return a(e.state.Options)}),[e]);var c=Object(r.useCallback)((function(t){return e.set_Value("close",t.target.checked)}),[n]),o=Object(r.useCallback)((function(t){return e.set_Value("PDFver",t.target.value)}),[n]),i=Object(r.useCallback)((function(){return e.switch_Mode("watch")}),[n]);return r.createElement("div",{className:"optionsForm"},r.createElement(re,null),r.createElement("main",{className:"optionsMain"},r.createElement("ul",null,r.createElement("li",null,r.createElement(oe,{value:n.PDFver,options:["ACROBAT4","ACROBAT5","ACROBAT6","ACROBAT7","ACROBAT8"],func:o})),r.createElement("li",null,r.createElement($,{name:"close document",checked:n.close,func:c})),r.createElement("li",null,r.createElement(J,{name:"watch mode",func:i})))),r.createElement(ae,null))})),le=Object(c.connect)(d,y)((function(e){Object(r.useMemo)((function(){(async()=>{k.evalScript(`$.evalFile("${S}json2.js")`),await C(P),await C(F)})()}),[]);return r.createElement(r.Fragment,null,function(){switch(e.state.ModeSwitch){case"watch":return r.createElement(ce,null);case"options":return r.createElement(ie,null);default:return r.createElement(ce,null)}}())})),ue=(n(10),f());a.render(r.createElement(c.Provider,{store:ue},r.createElement(le,null)),document.getElementById("root"))}]);
//# sourceMappingURL=main.min.js.map